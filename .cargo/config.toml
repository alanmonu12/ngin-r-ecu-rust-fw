[build]
# Instruction set of Cortex-M4F (used in NUCLEO-STM32L476)
target = "thumbv7em-none-eabihf"


# --- CAMBIO IMPORTANTE ---
# Mueve 'rustflags' de [build] a [target.EL_CHIP]
[target.thumbv7em-none-eabihf]
rustflags = [
  "-C", "link-arg=-Tlink.x",
  #"-C", "link-arg=-Tdefmt.x",
  # Otras flags que tengas (ej. flip-link)
]

[target.'cfg(all(target_arch = "arm", target_os = "none"))']
# uncomment ONE of these three option to make `cargo run` start a GDB session
# which option to pick depends on your system
# runner = "arm-eabi-gdb -x openocd.gdb"
runner = "gdb-multiarch -x openocd.gdb"
# runner = "gdb -x openocd.gdb"

[alias]
# Comando corto para testear l√≥gica en la PC
test-pc = "test --target x86_64-unknown-linux-gnu"